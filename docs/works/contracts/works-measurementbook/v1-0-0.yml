swagger: '2.0'
# eGSP YAML Template Version: 1.0 
# This is a version number for the YAML template. This must not be changed.

info:
  version: 1.0.0
  ######################################################
  # All API's are POST. _create,_search,_update for post,get and put. RequestInfo will be part of body. For multiple records we can pass multiple value with comman seperated values*.
  # All _search will be synchronous and all _create and _update will be asynchronous*.
  # RequestInfo and ResponseInfo object should be reffered from Common*.
  # In _search API, tenantId should be passed in query param. In _create/_update, tenantId should be passed in the model.
  # Readonly means that even if these fields are passed in the request, it will be ignored in create/update and will not be added/updated in the entities. The readonly fields might be passed to the _search API's to make use of fields for the search Query API. while calling _search API's even mandatory fields might not be available, it is mandatory only in the _create API's*.
  # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message.
  # Definition must start with Upper case followed by camel case.
  # Every model will have tenantId. Validate tenantId on create.
  # Parameter name must start with small case followed by camel case.
  # Path must be in small case.
  ######################################################
  
  title: eGov Works Management System - Measurement Book.
  description: |
    APIs for Works Management module. This module handles creation of Measurement Book and Contractor Bill.
  contact:
    name: eGovernments Foundation
    email : contacts@egovernments.org
schemes:
  - https
basePath: '/works-measurementbook/v1'
x-api-id: 'org.egov.works.measurementbook'
x-common-path: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml'
paths:
  /measurementbooks/_create:
    post:
      summary: Create new Measurement Book(s).
      description: |
          To create new Measurement Book in the system. API supports bulk creation with max limit as defined in the Measurement Book Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To create one Measurement Book, please pass array with one Measurement Book object.
          
          To create Measurement Book, the Letter of Acceptance/Work Order must be genarated and its offline status should be Work Commenced. There can be multiple measurement books for single Letter Of acceptance Estimate. Measurement books are not allowed to create once the Final bill is generated for Letter of Acceptance Estimate.
          
          The workflow will be there for measurement book. Save as drafts also required. Atleast one item Tendered Item or Non Tendered or Lump sum item is mandatory before submitting the Measurememnt Book. 
          
          Detailed Measurements needs to be captured for Measurement Book activities if there exists detailed measurements in estimate for the same activity.If Detailed Measurements are captured then the Cureent Entry Quantity at activity level will be defaulted from the computed value from measurements and not allowed to edit. Cureent Entry Quantity at activity can be directly entered if no measurements exists for the the Estimate/LOA activity.
          
      parameters:
        - name: MeasurementBookRequest
          in: body
          description: Details of new Measurement Book(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/MeasurementBookRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        200:
          description: Measurement Book(s) created successfully
          schema:
            $ref: '#/definitions/MeasurementBookResponse'
        400:
          description: Measurement Book(s) creation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Measurement Book  
        
  /measurementbooks/_update:
    post:
      summary: Update existing Measurement Book(s).
      description: |
          To update existing Measurement Book in the system. API supports bulk updation with max limit as defined in the Measurement Book Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To update one Measurement Book, please pass array with one Measurement Book object.
          
          In update fields can be modified based on confguration defined in the system i.e., configuration for allowing the workflow users to edit the Measurement Book details. 
          
          If configuration says not allowed to edit during the workflow then all the fields are disabled except the Workflow details and the fields which needs to be captured at different status are enabled. Only the creator can edit all the fields when the Measurement Book in creator inbox(in Rejected status) or in drafts. 
          
          Auditing should be in place to keep track of the changes edited during the workflow.  
          
          
          
      parameters:
        - name: MeasurementBookRequest
          in: body
          description: Details of Measurement Book(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/MeasurementBookRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        200:
          description: Measurement Book(s) updated successfully
          schema:
            $ref: '#/definitions/MeasurementBookResponse'
        400:
          description: Measurement Book(s) updation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Measurement Book
        
  /measurementbooks/_search:
    post:
      summary: Get the list of Measurement Book(s) defined in the system.
      description: |
          Search and get Measurement Book(s) based on defined search criteria.
          Currently search parameters are only allowed as HTTP query params.
          
          In case multiple parameters are passed Measurement Book(s) will be searched as an AND combination of all the parameters.
          
          Maximum result size is restricted based on the maxlength of Notice as defined in MeasurementBookResponse model.
          
          Search results will be sorted by the sortProperty Provided in the parameters
      parameters:
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageSize"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageNumber"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/sortProperty"
        - name: ids
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Ids of Measurement Book to get the Measurement Books
        - name: statuses
          in: query
          type: array
          items:
            type: string
          format: multiValueList
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of the Measurement Book Status
        - name: workOrderNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Work Order Numbers
        - name: workOrderNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: mbRefNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of MB Reference Numbers         
        - name: mbRefNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: loaNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of LOA Numbers
        - name: loaNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: detailedEstimateNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Detailed Estimate Numbers
        - name: detailedEstimateNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: workIdentificationNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Work Identification Numbers
        - name: workIdentificationNumbersLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: fromDate
          in: query
          type: integer
          format: int64
          x-displayformat: 'dd/MM/yyyy'
          required: false
          description: Epoch time from when the Measurement Book is created
        - name: toDate
          in: query
          type: integer
          format: int64
          x-displayformat: 'dd/MM/yyyy'
          required: false
          description: Epoch time till when the Measurement Book is created
        - name: department
          in: query
          type: array
          items:
            type: string
          format: multiValueList
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of the Department for which Measurement Book belongs to
        - name: createdBy
          in: query
          type: string
          format: singleValueList
          required: false
          description: The user who created the Measurement Book
        - name: contractorNames
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Names of the contractor to which Measurement Book belongs to
        - name: contractorNameLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
        - name: contractorCodes
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of codes of the contractor to which Measurement Book belongs to
        - name: contractorCodeLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.
      responses:
        200:
          description: Measurement Book(s) Retrieved Successfully
          schema:
            $ref: "#/definitions/MeasurementBookResponse"
        '400':
          description: Invalid input.
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
       - Measurement Book
       
  /contractorbills/_search:
    post:
      summary: Get the list of Contractor Bill(s) defined in the system.
      description: |
          Search and get Contractor Bill(s) based on defined search criteria.
          Currently search parameters are only allowed as HTTP query params.
          
          Search results will be sorted by the sort Property Provided in the parameters
      parameters:
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageSize"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageNumber"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/sortProperty"
        - name: ids
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Ids of Contractor Bills
        - name: letterOfAcceptanceNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Letter of Acceptance Numbers
        - name: letterOfAcceptanceNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive.  
        - name: billFromDate
          in: query
          type: integer
          format: int64
          x-displayformat: 'dd/MM/yyyy'
          required: false
          allowEmptyValue: true
          description: Epoch time from when bill is created
        - name: billToDate
          in: query
          type: integer
          format: int64
          x-displayformat: 'dd/MM/yyyy'
          required: false
          allowEmptyValue: true
          description: Epoch time till when bill is created
        - name: billTypes
          in: query
          type: array
          items:
            type: string
          format: multiValueList
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of bill types
        - name: billNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of bill numbers
        - name: billNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive. 
        - name: statuses
          in: query
          type: array
          items:
            type: string
          format: multiValueList
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Contractor Bill Status
        - name: workIdentificationNumbers
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of Work Identification Numbers
        - name: workIdentificationNumberLike
          in: query
          type: string
          format: autoComplete
          required: false
          allowEmptyValue: true
          description: Matches exact or like string given regardless of case-sensitive. 
        - name: contractorNames
          in: query
          type: array
          items:
            type: string
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of contractor names
        - name: departmentCodes
          in: query
          type: array
          items:
            type: string
          format: multiValueList
          maxItems: 50
          required: false
          allowEmptyValue: true
          description: Comma separated list of department of the Contractor Bill
        - name: spillOverFlag
          in: query
          type: boolean
          required: false
          description: Boolean value to check whether its Spillover or not
      responses:
        200:
          description: Contractor Bill(s) Retrieved Successfully
          schema:
            $ref: "#/definitions/ContractorBillResponse"
        '400':
          description: Invalid input.
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
       - Contractor Bill
        
  /contractorbills/_create:
    post:
      summary: Create new Contractor Bill(s).
      description: |
          To create new Contractor Bill in the system. API supports bulk creation with max limit as defined in the Contractor Bill Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To create one Contractor Bill, please pass array with one Contractor Bill object.
          
          To create Contractor Bill, there should be one or more MB's in approved status where Bills are not created already for the same MB. There can be multiple Contractor Bills for the same MB in case of MB's having Part Rate flagged activities. Contractor Bills are not allowed to create once the Final bill is generated for Letter of Acceptance Estimate/Work Order.
          
          There can be more than one Part Bill for single Letter of Acceptance Estimate/Work Order. Only one Final bill will be there for single Letter of Acceptance Estimate/Work Order. Completion Date needs to be captured and Completion Certificate needs to be generated on Final Bill approval
          
          The workflow will be there for Contractor Bill. Save as drafts also required.
          
          The Debit account code is fetched from the Budget head of the correspodning Estimate. The Debit amount is the sum of the MB amount for which bill is created. The sum of debit and credit amount should be equal. There can be Statutory/Standard/Custom deductions along with Advance Adjustments and Retention Money deductions in contractor bill. The contractor net payeble account code will be fetched based on the purpose.
          
      parameters:
        - name: ContractorBillRequest
          in: body
          description: Details of new Contractor Bill(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/ContractorBillRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        200:
          description: Contractor Bill(s) created successfully
          schema:
            $ref: '#/definitions/ContractorBillResponse'
        400:
          description: Contractor Bill(s) creation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Contractor Bill
        
  /contractorbills/_update:
    post:
      summary: Update Contractor Bill(s).
      description: |
          To update Contractor Bill in the system. API supports bulk updation with max limit as defined in the Contractor Bill Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To update one Contractor Bill, please pass array with one Contractor Bill object.
          
            Only the creator can edit all the fields when the Contractor Bill in creator inbox(in Rejected status) or in drafts. Update during workflow will have all the fields readonly except few fields which are allowed to modify during each stage of workflow including Workflow Details. The status and workflow state will be updated during each stage of workflow approval.
          
      parameters:
        - name: ContractorBillRequest
          in: body
          description: Details of Contractor Bill(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/ContractorBillRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        200:
          description: Contractor Bill(s) updated successfully
          schema:
            $ref: '#/definitions/ContractorBillResponse'
        400:
          description: Contractor Bill(s) updation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Contractor Bill
        
definitions:
########################################################
#RequestInfo and ResponseInfo object should be reffered from Common.
#Definition must start with Upper case followed by camel case.
#Every model will have tenantId
########################################################

  MeasurementBook:
    type: object
    description: An Object that holds the basic data for Measurement Book
    properties:
      id:
        type: string
        description: Unique Identifier of the Measurement Book
      tenantId:
        type: string
        description: Tenant id of the Measurement Book
        maxLength: 128
        minLength: 2
      mbRefNo:
        type: string
        pattern: '[a-zA-Z0-9-/]+'
        description: Reference number for the Measurement book. 
        maxLength: 50
        minLength: 1
      contractorComments:
        type: string
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
        description: Comments for the measurement book
        maxLength: 1024
        minLength: 1
      mbDate:
        type: integer
        format: int64
        x-displayformat: 'dd/MM/yyyy'
        description: Epoch time of when the measurement book created
      mbIssuedDate:
        type: integer
        format: int64
        x-displayformat: 'dd/MM/yyyy'
        description: Epoch time of Issued date of the measurement book
      mbAbstract:
        type: string
        description: Abstract comments for the measurement book
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
        maxLength: 1024
        minLength: 1
      fromPageNo:
        type: integer
        description: From page number for the measurement book
        maxLength: 10
        minLength: 1
      toPageNo:
        type: integer
        description: To page number for the measurement book
        maxLength: 10
      letterOfAcceptanceEstimate:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-workorder/v1-0-0.yml#/definitions/LetterOfAcceptanceEstimate"
        description: Reference of Letter of Acceptance Estimate
      revisionLOA:
        type: string
        description: Reference of Revision LOA
      status:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorksStatus'
        description: Status of the Measurement Book
      measurementBookDetails:
        type: array
        description: Array of Measurement Book Details
        minItems: 1
        items:
          $ref: '#/definitions/MeasurementBookDetail'
      isLegacyMB:
        type: boolean
        description: True if Measurement Book is legacy record
      mbAmount:
        type: number
        format: BigDecimal
        description: Amount for the Measurement book.
        maxLength: 20
        minLength: 1
      approvedDate:
        type: integer
        format: int64
        x-displayformat: 'dd/MM/yyyy'
        description: Epoch time of the Measurement book Approved date 
      documentDetails:
        type: array
        description: Array of document details
        items:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/DocumentDetail'
      workFlowDetails:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkFlowDetails'
      stateId:
        type: string
        description: State id of the workflow
      cancellationReason:
        type: string
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
        description: Reason for cancellation of the Measurement book, Required only while cancelling Measurement book
        maxLength: 100
      cancellationRemarks:
        type: string
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
        description: Remarks for cancellation of the Measurement book, Required only while cancelling Measurement book
        maxLength: 512
      billNumber:
        type: string
        pattern: '[a-zA-Z0-9-/]+'
        description: Comma separated Bill Numbers. 
        maxLength: 256
        minLength: 1
      billDate:
        type: integer
        format: int64
        x-displayformat: 'dd/MM/yyyy'
        description: Epoch time of when the bills created  
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      deleted:
        type: boolean
        description: Boolean value to identify whether the object is deleted or not from UI.
        default: false
    required:
      - tenantId
      - letterOfAcceptanceEstimate
      - mbRefNo
      - mbDate
      - mbAbstract
      - fromPageNo
      - mbAmount
      - status
      
  MeasurementBookDetail:
    type: object
    description: An Object that hold details for the given Measurement book. At least one data should be given to create an Measurement book
    properties:
      id:
        type: string
        description: Unique Identifier of the MB Detail
      tenantId:
        type: string
        description: Tenant id of the MB Detail
        maxLength: 128
        minLength: 2
      measurementBook:
        type: string
        description: Measurement book reference
      loaActivity:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-workorder/v1-0-0.yml#/definitions/LOAActivity"        
      quantity:
        type: number
        format: double
        description: Current entry Quantity for the Measurement book details
        maxLength: 20
        minLength: 1
      rate:
        type: number
        format: double
        description: The Approved Rate for the Measurement book details
        maxLength: 20
        minLength: 1
      remarks:
        type: string
        description: Remarks for the Measurement book details
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]"
        maxLength: 1024
      amount:
        type: number
        format: BigDecimal
        description: Amount for the Measurement book details
        maxLength: 20
        minLength: 1
      measurementSheets:
        type: array
        description: Array of Measurement Book Measurement Sheets
        items:
          $ref: '#/definitions/MBMeasurementSheet'
      partRate:
        type: number
        format: BigDecimal
        maxLength: 20
        description: Part Rate of the Measurement sheet
      reducedRate:
        type: number
        format: BigDecimal
        maxLength: 20
        description: Reduced Rate of the Measurement sheet
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      deleted:
        type: boolean
        description: Boolean value to identify whether the object is deleted or not from UI.
        default: false
    required:
      - tenantId
      - rate
      - quantity
      - amount
      - loaActivity
      - measurementBook
        
  MBMeasurementSheet:
      type: object
      description: An Object that holds the basic data for a MB Measurement Sheet
      properties:
        id:
          type: string
          description: Unique Identifier of the Measurement Sheet
        tenantId:
          type: string
          description: Tenant id of the Measurement Sheet
          maxLength: 128
          minLength: 2
        remarks:
          type: string
          description: Remarks of the Measurement sheet
          pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]"
          maxLength: 1024
        number:
          type: number
          format: BigDecimal
          description: Number of the Measurement sheet
          maxLength: 20
        multiplier:
          type: number
          format: BigDecimal
          description: Multiplication factor for the number. If the unit is multiplier then number will be multiplied to number.
          maxLength: 10
        length:
          type: number
          format: BigDecimal
          description: Length of the Measurement sheet
          maxLength: 20
        width:
          type: number
          format: BigDecimal
          description: Width of the Measurement sheet
          maxLength: 20
        depthOrHeight:
          type: number
          format: BigDecimal
          description: Depth or Height of the Measurement sheet
          maxLength: 20
        quantity:
          type: number
          format: BigDecimal
          description: Quantity of the Measurement sheet
          minLength: 1
          maxLength: 20
        measurementBookDetail:
          type: string
          description: Measurement Book Details reference
        loaMeasurementSheet:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-workorder/v1-0-0.yml#/definitions/LOAMeasurementSheet"
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
        deleted:
          type: boolean
          description: Boolean value to identify whether the object is deleted or not from UI.
          default: false
      required:
        - tenantId
        - quantity
        - measurementBookDetail
        - loaMeasurementSheet
        
  MeasurementBookRequest:
      description: Contract class to send response. Array of Measurement Book items are used in case of search results, also multiple  Measurement Book item is used for create and update
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo'
        measurementBooks:
          description: Used for create and update only
          type: array
          minimum: 1
          maximum: 100
          items:
            $ref: '#/definitions/MeasurementBook'
            
  MeasurementBookResponse:
    description: Contract class to send response. Array of Measurement Book items are used in case of search results, also multiple  Measurement Book item is used for create and update
    properties:
      ResponseInfo:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo'
      measurementBooks:
        description: Used for search result and create only
        type: array
        maximum: 500
        items:
          $ref: '#/definitions/MeasurementBook'
          
  ContractorBillRequest:
      description: Contract class to send response. Array of ContractorBill items are used in case of search results, whereas single ContractorBill item is used for create and update
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo'
        contractorBills:
          description: Used for create and update only
          type: array
          minimum: 1
          maximum: 100
          items:
            $ref: '#/definitions/ContractorBill'
            
  ContractorBillResponse:
    description: Contract class to send response. Array of ContractorBill items are used in case of search results, whereas single ContractorBill item is used for create and update
    properties:
      ResponseInfo:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo'
      contractorBills:
        description: Used for search result and create only
        type: array
        maximum: 500
        items:
          $ref: '#/definitions/ContractorBill'
          
  ContractorBill:
    description: An Object that holds the basic data for a Contractor Bill
    allOf:
    - $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/financials/contracts/egf-bill/v1-0-0.yml#/definitions/BillRegister'
    - type: object
    - description: Contractor Bill object extends Bill Register object
    - properties:
        id:
          type: string
          description: Unique Identifier of the Contractor Bill
        tenantId:
          type: string
          description: Tenant id of the Contractor Bill
          maxLength: 128
          minLength: 2
        billSequenceNumber:
          type: string
          description: Bill sequence number of the Bill
          pattern: '[a-zA-Z0-9-/]+'
          maxLength: 50
        approvedDate:
          type: integer
          format: int64
          x-displayformat: 'dd/MM/yyyy'
          description: Epoch time of when the Bill approved
        approvedBy:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/egov-user/contracts/v1-0-0.yml#/definitions/User'
          description: User name of the User who approved the Bill
        cancellationReason:
          type: string
          pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
          description: Reason for cancellation of the Bill, Required only while cancelling Contractor Bill
          maxLength: 100
        cancellationRemarks:
          type: string
          pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
          description: Remarks for cancellation of the Bill, Required only while cancelling Bill
          maxLength: 512
        assets:
          type: array
          description: Array of Asset details for the Bill
          items:
            $ref: '#/definitions/AssetForBill'
        mbForContractorBill:
          type: array
          description: Array of Measurement Book for the Bill
          items:
            $ref: '#/definitions/MeasurementBookForContractorBill' 
        letterOfAcceptanceEstimate:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-workorder/v1-0-0.yml#/definitions/LetterOfAcceptanceEstimate"
          description: LOA and Estimate reference for the Bill
        workFlowDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkFlowDetails'
        stateId:
          type: string
          description: State id of the workflow
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
        deleted:
            type: boolean
            description: Boolean value to identify whether the object is deleted or not from UI.
            default: false  
        spillOver:
            type: boolean
            description: Boolean value to identify whether the bills are spillover or current.
            default: false  
	workCompletionDate:
            type: integer
            format: int64
            x-displayformat: 'dd/MM/yyyy'
            description: Epoch time of when the Final Bill Completed
    required:
      - tenantId
      - letterOfAcceptanceEstimate
      - mbForContractorBill
      
  AssetForBill:
    type: object
    description: Asset information for the Contractor Bill
    properties:
      id:
        type: string
        description: Unique Identifier of the Asset for Contractor Bill
      tenantId:
        type: string
        description: Tenant id of the Asset for Contractor Bill
        maxLength: 128
        minLength: 2
      asset:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/Asset-MAHA/contracts/v1-0-0-mh.yml#/definitions/Asset'
        description: Asset Reference from Asset module
        format: singleValueList
      chartOfAccounts:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/financials/contracts/egf-master/v1-0-0.yml#/definitions/ChartOfAccount'
        description: Chart of Accounts for the Assets for Bill
      description:
        type: string
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]+"
        description: Description for the Asset for Bill
        maxLength: 1024
      amount:
        type: number
        format: BigDecimal
        description: Asset wise Amount for the Bill
        minLength: 1
        maxLength: 20
      contractorBill:
        #$ref: '#/definitions/ContractorBill'
        type: string
        description: Bill reference in the Asset
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      deleted:
          type: boolean
          description: Boolean value to identify whether the object is deleted or not from UI.
          default: false  
    required:
      - tenantId
      - asset
      - amount
      - contractorBill
      
  MeasurementBookForContractorBill:
    type: object
    description: Measurement Book information for the Contractor Bill
    properties:
      id:
        type: string
        description: Unique Identifier of the MB for Contractor Bill
      tenantId:
        type: string
        description: Tenant id of the MB for Contractor Bill
        maxLength: 128
        minLength: 2
      measurementBook:
        $ref: '#/definitions/MeasurementBook'
        description: Measurement Book Reference in the MB for Contractor Bill
      contractorBill:
	#$ref: '#/definitions/ContractorBill'
        type: string
        description: Bill reference in the MB for Contractor Bill
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      deleted:
          type: boolean
          description: Boolean value to identify whether the object is deleted or not from UI.
          default: false  
    required:
      - tenantId
      - contractorBill
      
tags:
  - name: Measurement Book
    description: APIs required for Measurement Book.
  - name: Contractor Bill
    description: APIs required for Contractor Bill.



